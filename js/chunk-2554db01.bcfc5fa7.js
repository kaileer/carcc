(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2554db01"],{2621:function(e,t){t.f=Object.getOwnPropertySymbols},"716d":function(e,t,s){"use strict";var r=s("ba0f"),n=s.n(r);n.a},7333:function(e,t,s){"use strict";var r=s("0d58"),n=s("2621"),o=s("52a7"),i=s("4bf8"),a=s("626a"),u=Object.assign;e.exports=!u||s("79e5")(function(){var e={},t={},s=Symbol(),r="abcdefghijklmnopqrst";return e[s]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[s]||Object.keys(u({},t)).join("")!=r})?function(e,t){var s=i(e),u=arguments.length,c=1,d=n.f,l=o.f;while(u>c){var f,p=a(arguments[c++]),m=d?r(p).concat(d(p)):r(p),h=m.length,b=0;while(h>b)l.call(p,f=m[b++])&&(s[f]=p[f])}return s}:u},"84fd":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px",rules:e.rules}},[s("el-collapse",{on:{change:function(e){}},model:{value:e.collapseActive,callback:function(t){e.collapseActive=t},expression:"collapseActive"}},[s("el-collapse-item",{attrs:{title:"　基本信息",name:"1"}},[s("el-form-item",{attrs:{label:"用户名称",prop:"user_name"}},[s("el-input",{model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"user_pass"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.user_pass,callback:function(t){e.$set(e.form,"user_pass",t)},expression:"form.user_pass"}})],1),s("el-form-item",{attrs:{label:"重复密码",prop:"check_pass"}},[s("el-input",{attrs:{type:"password"},model:{value:e.form.check_pass,callback:function(t){e.$set(e.form,"check_pass",t)},expression:"form.check_pass"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"user_real_name"}},[s("el-input",{model:{value:e.form.user_real_name,callback:function(t){e.$set(e.form,"user_real_name",t)},expression:"form.user_real_name"}})],1),s("el-form-item",{attrs:{label:"联系电话"}},[s("el-input",{model:{value:e.form.user_phone,callback:function(t){e.$set(e.form,"user_phone",t)},expression:"form.user_phone"}})],1),s("el-form-item",{attrs:{label:"岗位",prop:"pos_id"}},[s("el-select",{staticClass:"mr10",attrs:{placeholder:"请选择"},model:{value:e.form.pos_id,callback:function(t){e.$set(e.form,"pos_id",t)},expression:"form.pos_id"}},e._l(e.positionOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.position_name,value:e.id}})}))],1),s("el-form-item",{attrs:{label:"所属公司",prop:"cp_id"}},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"domTreeCompany",attrs:{data:e.dataTreeCompany,"show-checkbox":"","check-strictly":"","highlight-current":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"check-change":e.handleCheckChange,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var r=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(r.mc_name))])])}}])})],1),s("el-form-item",{attrs:{label:"数据权限",prop:"user_cp_id"}},[s("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"domTreePermission",attrs:{data:e.dataTreePermission,"show-checkbox":"","check-strictly":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{check:e.handleClickPermission},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var r=t.data;return s("span",{staticClass:"custom-tree-node"},[s("span",[e._v(e._s(r.mc_name))])])}}])})],1)],1)],1),s("el-form-item",{staticClass:"form-submit"},[s("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")]),s("el-button",{on:{click:function(t){e.$router.back()}}},[e._v("返 回")])],1)],1)],1)},n=[],o=s("c93e"),i=(s("f751"),s("cadf"),s("551c"),s("097d"),s("e93f")),a={data:function(){var e=this,t=[],s=function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.form.user_pass?r(new Error("两次输入密码不一致!")):r()};return{collapseActive:["1"],pageType:"",loading:!1,positionOptions:[],dataTreeCompany:JSON.parse(JSON.stringify(t)),dataTreePermission:JSON.parse(JSON.stringify(t)),form:{company:"",cp_id:[],user_cp_id:[],pos_id:"",pos_name:"",user_auth:"",user_id:"",user_name:"",user_pass:"",check_pass:"",user_phone:"",user_real_name:""},rules:{user_name:[{required:!0,message:"请输入用户名称",trigger:"blur"}],user_pass:[{required:!0,message:"请输入密码",trigger:"blur"}],check_pass:[{required:!0,validator:s,trigger:"blur"}],user_real_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],pos_id:[{required:!0,message:"请选择岗位",trigger:"blur"}],company:[{required:!0,message:"请勾选所属公司",trigger:"blur"}]}}},mounted:function(){this.getPositionList(),this.checkPath()},methods:{isDisabled:function(){var e="view"==this.pageType;return e},checkPath:function(){var e=this.$route.path;this.$route.query;e.indexOf("add")>-1?this.pageType="add":e.indexOf("edit")>-1?(this.getFormData(),this.pageType="edit"):e.indexOf("view")>-1&&(this.getFormData(),this.pageType="view"),this.getTreeList()},getFormData:function(){var e=this;i["s"]({id:this.$route.query.id}).then(function(t){0==t.code?(Object.assign(e.form,t.data),e.$refs.domTreeCompany.setCheckedKeys(t.data.cp_id),e.$refs.domTreePermission.setCheckedKeys(t.data.user_cp_id)):e.$message.error(t.msg)})},getTreeList:function(){var e=this;this.loading=!0,i["f"]({id:this.$route.query.id}).then(function(t){e.loading=!1,0==t.code?(e.dataTreeCompany=JSON.parse(JSON.stringify(t.data)),e.dataTreePermission=JSON.parse(JSON.stringify(t.data))):e.$message.error(t.msg)})},getPositionList:function(){var e=this;i["t"]({}).then(function(t){0==t.code?e.positionOptions=t.data:e.$message.error(t.msg)})},handleClickCompany:function(e,t){},handleClickPermission:function(e,t){this.form.user_cp_id=t.checkedKeys},handleCheckChange:function(e,t,s){1==t?(this.form.cp_id=[e.id],this.$refs.domTreeCompany.setCheckedKeys([e.id])):this.form.cp_id==[e.id]&&this.$refs.domTreeCompany.setCheckedKeys([e.id])},handleNodeClick:function(e,t,s){this.form.cp_id=[e.id],this.$refs.domTreeCompany.setCheckedKeys([e.id])},handleSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;if("add"==e.pageType)i["o"](e.form).then(function(t){0==t.code?(e.$message.success("提交成功！"),e.$router.back()):e.$message.error(t.msg)});else{var s=Object(o["a"])({id:e.$route.query.id},e.form);i["q"](s).then(function(t){0==t.code?(e.$message.success("提交成功！"),e.$router.back()):e.$message.error(t.msg)})}})}}},u=a,c=(s("716d"),s("2877")),d=Object(c["a"])(u,r,n,!1,null,"f7b5eb0a",null);d.options.__file="edit.vue";t["default"]=d.exports},ba0f:function(e,t,s){},e93f:function(e,t,s){"use strict";s.d(t,"f",function(){return n}),s.d(t,"g",function(){return o}),s.d(t,"c",function(){return i}),s.d(t,"e",function(){return a}),s.d(t,"d",function(){return u}),s.d(t,"r",function(){return c}),s.d(t,"o",function(){return d}),s.d(t,"q",function(){return l}),s.d(t,"s",function(){return f}),s.d(t,"p",function(){return p}),s.d(t,"t",function(){return m}),s.d(t,"n",function(){return h}),s.d(t,"k",function(){return b}),s.d(t,"m",function(){return _}),s.d(t,"l",function(){return g}),s.d(t,"b",function(){return k}),s.d(t,"a",function(){return v}),s.d(t,"j",function(){return y}),s.d(t,"i",function(){return O}),s.d(t,"h",function(){return C});s("cadf"),s("551c"),s("097d");var r=s("0c6d"),n=function(e){return Object(r["a"])({url:"/business/Depart/listCP",method:"post",data:e})},o=function(e){return Object(r["a"])({url:"/business/Depart/departListAll",method:"post",data:e})},i=function(e){return Object(r["a"])({url:"/business/Depart/addChildCP",method:"post",data:e})},a=function(e){return Object(r["a"])({url:"/business/Depart/upChildCP",method:"post",data:e})},u=function(e){return Object(r["a"])({url:"/business/Depart/delCP",method:"post",data:e})},c=function(e){return Object(r["a"])({url:"/business/User/listUser",method:"post",data:e})},d=function(e){return Object(r["a"])({url:"/business/User/addUser",method:"post",data:e})},l=function(e){return Object(r["a"])({url:"/business/User/updateUser",method:"post",data:e})},f=function(e){return Object(r["a"])({url:"/business/User/infoUser",method:"post",data:e})},p=function(e){return Object(r["a"])({url:"/business/User/delUser",method:"post",data:e})},m=function(e){return Object(r["a"])({url:"/business/Position/positionList",method:"post",data:e})},h=function(e){return Object(r["a"])({url:"/business/Position/positionList",method:"post",data:e})},b=function(e){return Object(r["a"])({url:"/business/Position/addPosition",method:"post",data:e})},_=function(e){return Object(r["a"])({url:"/business/Position/updatePosition",method:"post",data:e})},g=function(e){return Object(r["a"])({url:"/business/Position/delPosition",method:"post",data:e})},k=function(e){return Object(r["a"])({url:"/business/Role/listRole",method:"post",data:e})},v=function(e){return Object(r["a"])({url:"/business/Role/updateRole",method:"post",data:e})},y=function(e){return Object(r["a"])({url:"/business/Position/positionRoleList",method:"post",data:e})},O=function(e){return Object(r["a"])({url:"/business/Position/updateRolePosition",method:"post",data:e})},C=function(e){return Object(r["a"])({url:"/business/Position/getAllAuthCode",method:"post",data:e})}},f751:function(e,t,s){var r=s("5ca1");r(r.S+r.F,"Object",{assign:s("7333")})}}]);
//# sourceMappingURL=chunk-2554db01.bcfc5fa7.js.map